2005-08-16  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Implem/ArrayType.cs:
		Style.
	  Mono.Cecil.Implem/ParameterDefinition.cs:
		Correct a bug in module obtention.
	  Mono.Cecil.Signatures/SignatureReader.cs:
		Correct a bug in arrays's signature reading.

	* Mono.Cecil.dll.sources
	  Mono.Cecil/IReflectionVisitor.cs
	  Mono.Cecil/IModuleDefinitionCollection.cs
	  Mono.Cecil/IInterfaceCollection.cs
	  Mono.Cecil/IProperty.cs
	  Mono.Cecil/BaseReflectionVisitor.cs
	  Mono.Cecil/INestedTypeCollection.cs
	  Mono.Cecil/ITypeReferenceCollection.cs
	  Mono.Cecil/IParameter.cs
	  Mono.Cecil/IExternTypeCollection.cs
	  Mono.Cecil/IField.cs
	  Mono.Cecil/IArrayDimensionCollection.cs
	  Mono.Cecil/IMethodDefinitionCollection.cs
	  Mono.Cecil/IPropertyDefinitionCollection.cs
	  Mono.Cecil/IAssemblyNameReferenceCollection.cs
	  Mono.Cecil/IModuleReferenceCollection.cs
	  Mono.Cecil/IHasConstant.cs
	  Mono.Cecil/ISecurityDeclarationCollection.cs
	  Mono.Cecil/IMetadataTokenProvider.cs
	  Mono.Cecil/IModuleDefinition.cs
	  Mono.Cecil/BaseStructureVisitor.cs
	  Mono.Cecil/IResourceCollection.cs
	  Mono.Cecil/IParameterDefinitionCollection.cs
	  Mono.Cecil/IEventDefinitionCollection.cs
	  Mono.Cecil/ITypeDefinitionCollection.cs
	  Mono.Cecil/IFieldDefinitionCollection.cs
	  Mono.Cecil/ICustomAttributeCollection.cs
	  Mono.Cecil/IOverrideCollection.cs
	  Mono.Cecil.Cil/IExceptionHandlerCollection.cs
	  Mono.Cecil.Cil/IVariableDefinitionCollection.cs
	  Mono.Cecil.Cil/IInstructionCollection.cs
	  CodeGen/cecil-gen.rb
	  CodeGen/cecil-gen-types.rb
	  CodeGen/templates/IndexedCollectionImplem.cs
	  CodeGen/templates/NamedCollectionImplem.cs
	  CodeGen/templates/IIndexedCollection.cs
	  CodeGen/templates/LzIndexedCollectionImplem.cs
	  CodeGen/templates/INamedCollection.cs
	  CodeGen/templates/LzNamedCollectionImplem.cs
	  CodeGen/cecil.xml
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Implem/InterfaceCollection.cs
	  Mono.Cecil.Implem/ModuleReferenceCollection.cs
	  Mono.Cecil.Implem/ExternTypeCollection.cs
	  Mono.Cecil.Implem/SecurityDeclarationCollection.cs
	  Mono.Cecil.Implem/OverrideCollection.cs
	  Mono.Cecil.Implem/ParameterDefinitionCollection.cs
	  Mono.Cecil.Implem/EventDefinitionCollection.cs
	  Mono.Cecil.Implem/FieldDefinitionCollection.cs
	  Mono.Cecil.Implem/PropertyDefinitionCollection.cs
	  Mono.Cecil.Implem/ModuleDefinitionCollection.cs
	  Mono.Cecil.Implem/CustomAttributeCollection.cs
	  Mono.Cecil.Implem/VariableDefinitionCollection.cs
	  Mono.Cecil.Implem/TypeReferenceCollection.cs
	  Mono.Cecil.Implem/StructureReader.cs
	  Mono.Cecil.Implem/MethodDefinition.cs
	  Mono.Cecil.Implem/EventDefinition.cs
	  Mono.Cecil.Implem/FieldDefinition.cs
	  Mono.Cecil.Implem/InstructionCollection.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Implem/ModuleDefinition.cs
	  Mono.Cecil.Implem/MethodReference.cs
	  Mono.Cecil.Implem/TypeReference.cs
	  Mono.Cecil.Implem/TypeDefinitionCollection.cs
	  Mono.Cecil.Implem/AssemblyNameReferenceCollection.cs
	  Mono.Cecil.Implem/ReflectionReader.cs
	  Mono.Cecil.Implem/MethodReturnType.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/AssemblyDefinition.cs
	  Mono.Cecil.Implem/TypeDefinition.cs
	  Mono.Cecil.Implem/AggressiveReflectionReader.cs
	  Mono.Cecil.Implem/MethodDefinitionCollection.cs
	  Mono.Cecil.Implem/CodeWriter.cs
	  Mono.Cecil.Implem/LazyReflectionReader.cs
	  Mono.Cecil.Implem/ParameterDefinition.cs
	  Mono.Cecil.Implem/PropertyDefinition.cs
	  Mono.Cecil.Implem/NestedTypeCollection.cs
	  Mono.Cecil.Implem/ResourceCollection.cs
	  Mono.Cecil.Implem/ExceptionHandlerCollection.cs
	  Mono.Cecil.Signatures/SignatureReader.cs
	  Mono.Cecil.Signatures/SignatureWriter.cs:
		Working on the writing layer.
		Begin to fix brokens part of the API.

2005-08-15  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil/ITypeDefinition.cs
	  CodeGen/templates/MetadataTableReader.cs
	  CodeGen/templates/PEFileHeader.cs
	  CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/CLIHeader.cs
	  CodeGen/templates/PEOptionalHeader.cs
	  CodeGen/templates/MetadataTableWriter.cs
	  CodeGen/templates/Table.cs
	  CodeGen/templates/MetadataRowReader.cs
	  CodeGen/templates/BaseMetadataVisitor.cs
	  CodeGen/templates/Section.cs
	  CodeGen/templates/MetadataRowWriter.cs
	  CodeGen/templates/ImageReader.cs
	  CodeGen/templates/IMetadataVisitor.cs
	  Mono.Cecil.Metadata/Assembly.cs
	  Mono.Cecil.Metadata/PropertyMap.cs
	  Mono.Cecil.Metadata/InterfaceImpl.cs
	  Mono.Cecil.Metadata/MetadataInitializer.cs
	  Mono.Cecil.Metadata/Constant.cs
	  Mono.Cecil.Metadata/MethodSpec.cs
	  Mono.Cecil.Metadata/BaseMetadataVisitor.cs
	  Mono.Cecil.Metadata/DeclSecurity.cs
	  Mono.Cecil.Metadata/TypeDef.cs
	  Mono.Cecil.Metadata/MethodImpl.cs
	  Mono.Cecil.Metadata/GenericParamConstraint.cs
	  Mono.Cecil.Metadata/NestedClass.cs
	  Mono.Cecil.Metadata/MetadataTableReader.cs
	  Mono.Cecil.Metadata/AssemblyRefProcessor.cs
	  Mono.Cecil.Metadata/AssemblyRef.cs
	  Mono.Cecil.Metadata/AssemblyRefOS.cs
	  Mono.Cecil.Metadata/Method.cs
	  Mono.Cecil.Metadata/RowCollection.cs
	  Mono.Cecil.Metadata/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/StringsHeap.cs
	  Mono.Cecil.Metadata/MetadataRowReader.cs
	  Mono.Cecil.Metadata/ExportedType.cs
	  Mono.Cecil.Metadata/CustomAttribute.cs
	  Mono.Cecil.Metadata/Param.cs
	  Mono.Cecil.Metadata/MetadataReader.cs
	  Mono.Cecil.Metadata/ClassLayout.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/BlobHeap.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Metadata/AssemblyOS.cs
	  Mono.Cecil.Metadata/ModuleRef.cs
	  Mono.Cecil.Metadata/MetadataRoot.cs
	  Mono.Cecil.Metadata/UserStringsHeap.cs
	  Mono.Cecil.Metadata/FieldMarshal.cs
	  Mono.Cecil.Metadata/GenericParam.cs
	  Mono.Cecil.Metadata/ImplMap.cs
	  Mono.Cecil.Metadata/TableCollection.cs
	  Mono.Cecil.Metadata/TablesHeap.cs
	  Mono.Cecil.Metadata/MetadataStreamCollection.cs
	  Mono.Cecil.Metadata/ManifestResource.cs
	  Mono.Cecil.Metadata/TypeRef.cs
	  Mono.Cecil.Metadata/AssemblyProcessor.cs
	  Mono.Cecil.Metadata/EventMap.cs
	  Mono.Cecil.Metadata/File.cs
	  Mono.Cecil.Metadata/Event.cs
	  Mono.Cecil.Metadata/FieldLayout.cs
	  Mono.Cecil.Metadata/Field.cs
	  Mono.Cecil.Metadata/Property.cs
	  Mono.Cecil.Metadata/Module.cs
	  Mono.Cecil.Metadata/GuidHeap.cs
	  Mono.Cecil.Metadata/MethodSemantics.cs
	  Mono.Cecil.Metadata/StandAloneSig.cs
	  Mono.Cecil.Metadata/MetadataStream.cs
	  Mono.Cecil.Metadata/FieldRVA.cs
	  Mono.Cecil.Metadata/TypeSpec.cs
	  Mono.Cecil.Metadata/MemberRef.cs
	  Mono.Cecil.Metadata/IMetadataVisitor.cs
	  Mono.Cecil.Implem/TypeDefinition.cs
	  Mono.Cecil.Signatures/MethodRefSig.cs
	  Mono.Cecil.Signatures/SignatureReader.cs
	  Mono.Cecil.Signatures/FieldSig.cs
	  Mono.Cecil.Signatures/PropertySig.cs
	  Mono.Cecil.Signatures/ISignatureVisitor.cs
	  Mono.Cecil.Signatures/SignatureWriter.cs
	  Mono.Cecil.Signatures/MethodDefSig.cs
	  Mono.Cecil.Signatures/LocalVarSig.cs
	  Mono.Cecil.Binary/PEFileHeader.cs
	  Mono.Cecil.Binary/IBinaryVisitor.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/CLIHeader.cs
	  Mono.Cecil.Binary/SectionCollection.cs
	  Mono.Cecil.Binary/Image.cs
	  Mono.Cecil.Binary/PEOptionalHeader.cs
	  Mono.Cecil.Binary/ImageInitializer.cs
	  Mono.Cecil.Binary/Imports.cs
	  Mono.Cecil.Binary/BaseImageVisitor.cs
	  Mono.Cecil.Binary/DOSHeader.cs
	  Mono.Cecil.Binary/Section.cs
	  Mono.Cecil.Binary/ImageReader.cs:
		Apply the new visitor model to the rest of Cecil.

	* Mono.Cecil/IReflectionVisitor.cs
	  Mono.Cecil/BaseReflectionVisitor.cs
	  Mono.Cecil/IReflectionStructureVisitor.cs
	  Mono.Cecil/BaseStructureVisitor.cs
	  Mono.Cecil.Cil/BaseCodeVisitor.cs
	  Mono.Cecil.Cil/ICodeVisitor.cs
	  CodeGen/cecil-gen.rb
	  CodeGen/cecil-gen-types.rb
	  CodeGen/templates/IndexedCollectionImplem.cs
	  CodeGen/templates/NamedCollectionImplem.cs
	  CodeGen/templates/LzIndexedCollectionImplem.cs
	  CodeGen/templates/LzNamedCollectionImplem.cs
	  CodeGen/cecil.xml
	  Mono.Cecil.Implem/InterfaceCollection.cs
	  Mono.Cecil.Implem/AssemblyLinkedResource.cs
	  Mono.Cecil.Implem/ModuleReferenceCollection.cs
	  Mono.Cecil.Implem/AssemblyName.cs
	  Mono.Cecil.Implem/Instruction.cs
	  Mono.Cecil.Implem/ExternTypeCollection.cs
	  Mono.Cecil.Implem/MarshalDesc.cs
	  Mono.Cecil.Implem/SecurityDeclarationCollection.cs
	  Mono.Cecil.Implem/OverrideCollection.cs
	  Mono.Cecil.Implem/ExceptionHandler.cs
	  Mono.Cecil.Implem/EmbeddedResource.cs
	  Mono.Cecil.Implem/ModuleReference.cs
	  Mono.Cecil.Implem/ParameterDefinitionCollection.cs
	  Mono.Cecil.Implem/EventDefinitionCollection.cs
	  Mono.Cecil.Implem/FieldDefinitionCollection.cs
	  Mono.Cecil.Implem/PropertyDefinitionCollection.cs
	  Mono.Cecil.Implem/ModuleDefinitionCollection.cs
	  Mono.Cecil.Implem/CustomAttributeCollection.cs
	  Mono.Cecil.Implem/VariableDefinitionCollection.cs
	  Mono.Cecil.Implem/TypeReferenceCollection.cs
	  Mono.Cecil.Implem/StructureReader.cs
	  Mono.Cecil.Implem/MethodDefinition.cs
	  Mono.Cecil.Implem/EventDefinition.cs
	  Mono.Cecil.Implem/FieldDefinition.cs
	  Mono.Cecil.Implem/InstructionCollection.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Implem/ModuleDefinition.cs
	  Mono.Cecil.Implem/CustomAttribute.cs
	  Mono.Cecil.Implem/VariableDefinition.cs
	  Mono.Cecil.Implem/TypeReference.cs
	  Mono.Cecil.Implem/TypeDefinitionCollection.cs
	  Mono.Cecil.Implem/AssemblyNameReferenceCollection.cs
	  Mono.Cecil.Implem/ReflectionReader.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/PInvokeInfo.cs
	  Mono.Cecil.Implem/AssemblyDefinition.cs
	  Mono.Cecil.Implem/TypeDefinition.cs
	  Mono.Cecil.Implem/CodeReader.cs
	  Mono.Cecil.Implem/AggressiveReflectionReader.cs
	  Mono.Cecil.Implem/MethodDefinitionCollection.cs
	  Mono.Cecil.Implem/CodeWriter.cs
	  Mono.Cecil.Implem/SecurityDeclaration.cs
	  Mono.Cecil.Implem/LazyReflectionReader.cs
	  Mono.Cecil.Implem/LinkedResource.cs
	  Mono.Cecil.Implem/ParameterDefinition.cs
	  Mono.Cecil.Implem/PropertyDefinition.cs
	  Mono.Cecil.Implem/MethodBody.cs
	  Mono.Cecil.Implem/NestedTypeCollection.cs
	  Mono.Cecil.Implem/ResourceCollection.cs
	  Mono.Cecil.Implem/ExceptionHandlerCollection.cs:
		BIG changes in the visitor object model. Last one
		was causing ambiguous calls, and does not provides
		differences between an interface and a typedef for
		instance. This is corrected by suffixing the visit
		method by the name of what it is visiting, and by
		configuring some collection to stop the propagation
		of the visitor.

	* Mono.Cecil/ITypeDefinition.cs
	  Mono.Cecil/IArrayType.cs
	  CodeGen/templates/Utilities.cs
	  Mono.Cecil.Metadata/Utilities.cs
	  Mono.Cecil.Implem/ArrayType.cs
	  Mono.Cecil.Implem/TypeReference.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/TypeDefinition.cs
	  Mono.Cecil.Implem/CodeWriter.cs
	  Mono.Cecil.Implem/Constants.cs
	  Mono.Cecil.Signatures/MarshalSig.cs:
		Work on the writing layer goes on.

2005-08-14  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil/NativeType.cs
	  Mono.Cecil.Signatures/MarshalSig.cs
	  Mono.Cecil.Signatures/SignatureWriter.cs
	  Mono.Cecil.Signatures/Signature.cs:
		Work on signature writing.
	  Mono.Cecil.Implem/MethodDefinition.cs
	  Mono.Cecil.Implem/TypeDefinition.cs:
		Correct bugs in setting the hasThis field.

	* CodeGen/templates/ImageWriter.cs
	  Mono.Cecil.Binary/templates/ImageWriter.cs
	  Mono.Cecil/AssemblyKind.cs:
		Make assemblies executable on win32.
	  Mono.Cecil.Implem/TypeDefinition.cs:
		Mark new fields as loaded.
	  Mono.Cecil.Implem/ReflectionWriter.cs:
		Correct the style to patch provided by
		Sebastien Ros  <s.ros@evaluant.com>

2005-08-13  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil/IMethod.cs
	  Mono.Cecil/ITypeDefinition.cs
	  Mono.Cecil/IModuleDefinition.cs
	  Mono.Cecil.Cil/OpCode.cs
	  Mono.Cecil.Cil/ICilWorker.cs
	  CodeGen/templates/ImageReader.cs
	  Mono.Cecil.Metadata/MetadataReader.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Metadata/MetadataRoot.cs
	  Mono.Cecil.Implem/ReflectionHelper.cs
	  Mono.Cecil.Implem/CilWorker.cs
	  Mono.Cecil.Implem/StructureReader.cs
	  Mono.Cecil.Implem/MethodDefinition.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Implem/ModuleDefinition.cs
	  Mono.Cecil.Implem/MethodReference.cs
	  Mono.Cecil.Implem/ReflectionReader.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/TypeDefinition.cs
	  Mono.Cecil.Implem/CodeReader.cs
	  Mono.Cecil.Implem/CodeWriter.cs
	  Mono.Cecil.Implem/Constants.cs
	  Mono.Cecil.Implem/ParameterDefinition.cs
	  Mono.Cecil.Implem/MethodBody.cs
	  Mono.Cecil.Binary/ImageReader.cs
	  Mono.Cecil.Binary/MemoryBinaryWriter.cs
	  Mono.Cecil.Signatures/SignatureReader.cs
	  Mono.Cecil.Signatures/SignatureWriter.cs:
		On going work on the writing layer.

	* Mono.Cecil.Signatures/SignatureReader.cs:
		Fix a bug when reading chars inside a custom
		attribute signature.

2005-08-12  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil/AssemblyFactory.cs
	  CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/MetadataTableWriter.cs
	  CodeGen/templates/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/MemoryBinaryWriter.cs:
		Use a custom binary writer instead of the old one.

	* Mono.Cecil/IMethod.cs
	  Mono.Cecil.Cil/BaseCodeVisitor.cs
	  Mono.Cecil.Cil/MethodHeader.cs
	  Mono.Cecil.Cil/ICodeVisitor.cs
	  Mono.Cecil.Implem/Instruction.cs
	  Mono.Cecil.Implem/MethodDefinition.cs
	  Mono.Cecil.Implem/FieldDefinition.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/CodeReader.cs
	  Mono.Cecil.Implem/CodeWriter.cs
	  Mono.Cecil.Implem/MethodBody.cs:
		Ongoing work on the writing layer.

	* CodeGen/templates/Utilities.cs
	  CodeGen/templates/NamedCollectionImplem.cs
	  CodeGen/templates/MetadataRowWriter.cs
	  CodeGen/templates/LzNamedCollectionImplem.cs
	  CodeGen/cecil.xml
	  Mono.Cecil/IMethod.cs
	  Mono.Cecil/IAssemblyName.cs
	  Mono.Cecil/IModuleDefinition.cs
	  Mono.Cecil/AssemblyFactory.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/Utilities.cs
	  Mono.Cecil.Implem/ReflectionHelper.cs
	  Mono.Cecil.Implem/StructureReader.cs
	  Mono.Cecil.Implem/MethodDefinition.cs
	  Mono.Cecil.Implem/EventDefinition.cs
	  Mono.Cecil.Implem/FieldDefinition.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Implem/ModuleDefinition.cs
	  Mono.Cecil.Implem/MethodReference.cs
	  Mono.Cecil.Implem/TypeDefinitionCollection.cs
	  Mono.Cecil.Implem/ReflectionReader.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/TypeDefinition.cs
	  Mono.Cecil.Implem/AggressiveReflectionReader.cs
	  Mono.Cecil.Implem/Constants.cs
	  Mono.Cecil.Implem/ParameterDefinition.cs
	  Mono.Cecil.Implem/PropertyDefinition.cs
	  Mono.Cecil.Signatures/SignatureWriter.cs:
		Ongoing work on the writing layer.
		Some fixes to the reading layer as well.

2005-08-11  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Signatures/SignatureReader.cs:
		Read Array signatures correctly.

	* Mono.Cecil/IMethodSignature.cs:
		Remove the setted for the return type.
	* Mono.Cecil.Implem/CilWorker.cs:
		Fix the build. Me idiot!
	* Mono.Cecil.Implem/Constants.cs:
		Remove unexisting type Variant.
	* Mono.Cecil.Implem/ReflectionHelper.cs:
		Complete the helper.

2005-08-10  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Cil/IMethodBody.cs
	  Mono.Cecil.Cil/ICilEmitter.cs
	  Mono.Cecil.Cil/ICilWorker.cs
	  Mono.Cecil.Implem/CilWorker.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/MethodBody.cs
	  Mono.Cecil.Implem/CilEmitter.cs
	  Mono.Cecil.Signatures/SignatureReader.cs
	  Mono.Cecil.Signatures/SignatureWriter.cs:
		Prepare the api for the cil emitting.

	* CodeGen/templates/Utilities.cs
	  CodeGen/templates/MetadataRowReader.cs
	  CodeGen/templates/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/Utilities.cs
	  Mono.Cecil.Metadata/MetadataRowReader.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs:
		Fix the build on .net, i was using a sugar
		syntax for delegates that csc does not understand.
		Remove the coded index cache from the static class
		Utilities, and add one per row visitor.

	* Mono.Cecil/IMethodReturnType.cs
	  Mono.Cecil.Implem/MethodReturnType.cs
	  Mono.Cecil.Implem/ReflectionReader.cs
	  Mono.Cecil.Implem/ParameterDefinition.cs:
		Make IMethodReturn type inherits IHasMarshalSpec so
		that users can read marshaling info for return types,
		and implement it.

	* CodeGen/templates/ImageWriter.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs:
		Cecil now emits assemblies understood by the .net clr.

2005-08-09  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil/AssemblyKind.cs
	  CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/ImageReader.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/ImageInitializer.cs
	  Mono.Cecil.Binary/ImageReader.cs:
		Lots of little fixes. Now dumpbin is coherent
		compared with an assembly emitted with csc or mcs
		but still not yet compatible with .net.

	* Mono.Cecil.Signatures/SignatureReader.cs:
		Fix an array out of range while trying to read
		fixed arrays signatures

	* CodeGen/templates/ImageWriter.cs
	  Mono.Cecil.Metadata/MetadataReader.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Implem/AssemblyName.cs
	  Mono.Cecil.Implem/StructureReader.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Binary/ImageCharacteristics.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/Image.cs:
		Cecil now emits assemblies that are understood
		by Mono and Cecil itself. Still have troubles
		with Msft CLR.

2005-08-08  Jb Evain  <jbevain@gmail.com>

	* CodeGen/cecil-gen.rb
	  CodeGen/templates/MetadataTableReader.cs
	  CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/MetadataTableWriter.cs
	  CodeGen/templates/BaseMetadataVisitor.cs
	  CodeGen/templates/MetadataRowReader.cs
	  CodeGen/templates/MetadataRowWriter.cs
	  CodeGen/cecil.xml
	  Mono.Cecil.Metadata/MetadataInitializer.cs
	  Mono.Cecil.Metadata/BaseMetadataVisitor.cs
	  Mono.Cecil.Metadata/MetadataTableReader.cs
	  Mono.Cecil.Metadata/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/MetadataRowReader.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/CLIHeader.cs
	  Mono.Cecil.Binary/ImageInitializer.cs:
		The writing layer almost works.

	* Mono.Cecil/AssemblyKind.cs
	  Mono.Cecil/TargetRuntime.cs
	  Mono.Cecil.dll.sources:
		Add thoses enumes to control assembly writing.
	* Mono.Cecil/AssemblyFactory.cs
	  Mono.Cecil/IReflectionVisitor.cs
	  Mono.Cecil/BaseReflectionVisitor.cs
	  Mono.Cecil/IAssemblyDefinition.cs
	  Mono.Cecil/IReflectionStructureVisitor.cs
	  Mono.Cecil/BaseStructureVisitor.cs
	  CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/MetadataTableWriter.cs
	  CodeGen/templates/MetadataRowWriter.cs
	  CodeGen/templates/LzNamedCollectionImplem.cs
	  Mono.Cecil.Metadata/MetadataInitializer.cs
	  Mono.Cecil.Metadata/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Metadata/MetadataStreamCollection.cs
	  Mono.Cecil.Implem/AssemblyName.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Implem/ModuleDefinition.cs
	  Mono.Cecil.Implem/TypeDefinitionCollection.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/AssemblyDefinition.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/ImageInitializer.cs
	  Mono.Cecil.Binary/Imports.cs:
		Things are now plugged. SaveAssembly will now emits
		a binary file. A broken file, but heh, at least it does.

2005-08-07  Jb Evain  <jbevain@gmail.com>

	* CodeGen/templates/ImageReader.cs
	  CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/IMetadataVisitor.cs
	  Mono.Cecil.Binary/ImageReader.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Metadata/IMetadataVisitor.cs
	  Mono.Cecil.Metadata/BaseMetadataVisitor.cs
	  Mono.Cecil.Metadata/MetadataReader.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Metadata/MetadataStreamCollection.cs:
		Simplify IMetadataVisitor.
		Work on the writing layer, closer to have something testable
		than ever.

	* CodeGen/cecil.xml
	  CodeGen/templates/ImageWriter.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Binary/PEOptionalHeader.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/Imports.cs:
		don't stop don't stop come ON!

	* CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/ImageReader.cs
	  CodeGen/templates/Section.cs
	  Mono.Cecil.Binary/Image.cs
	  Mono.Cecil.Binary/ImageReader.cs
	  Mono.Cecil.Binary/ImageInitializer.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/Section.cs
	  Mono.Cecil.Metadata/MetadataReader.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Implem/StructureReader.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Implem/CodeWriter.cs:
		Some writing layer love.

	* CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/ImageReader.cs
	  Mono.Cecil.Binary/Imports.cs
	  Mono.Cecil.Binary/ImageReader.cs
	  Mono.Cecil.Binary/ImageInitializer.cs
	  Mono.Cecil.Binary/ImageWriter.cs:
		Read an write correctly the Hint/Name table
		at the end of the .text section.

	* CodeGen/templates/ImageWriter.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/ImageInitializer.cs:
		More writing layer stuff.

2005-08-06  Jb Evain  <jbevain@gmail.com>

	* CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/MetadataInitializer.cs
	  Mono.Cecil.Metadata/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/StringsHeap.cs
	  Mono.Cecil.Metadata/BlobHeap.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Metadata/UserStringsHeap.cs
	  Mono.Cecil.Metadata/TableCollection.cs
	  Mono.Cecil.Metadata/TablesHeap.cs
	  Mono.Cecil.Metadata/MetadataHeap.cs
	  Mono.Cecil.Metadata/GuidHeap.cs
	  Mono.Cecil.Metadata/MetadataStream.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/CodeWriter.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Binary/ImageInitializer.cs:
		Playing lego with bricks from the writing layer.

	* Mono.Cecil.dll.sources:
		Updated.
	* CodeGen/templates/CLIHeader.cs
	  CodeGen/templates/PEOptionalHeader.cs
		Blah.
	* CodeGen/cecil.xml
	  Mono.Cecil.Binary/CLIHeader.cs
	  Mono.Cecil.Binary/PEOptionalHeader.cs:
	  Mono.Cecil.Binary/PEFileHeader.cs
		On going work on the writing layer

	* CodeGen/templates/ImageWriter.cs
	  CodeGen/templates/ImageReader.cs
	  Mono.Cecil.Binary/BaseImageVisitor.cs
	  Mono.Cecil.Binary/ImageReader.cs
	  Mono.Cecil.Binary/ImageInitializer.cs
	  Mono.Cecil.Binary/ImageWriter.cs
	  Mono.Cecil.Metadata/BaseMetadataVisitor.cs
	  Mono.Cecil.Metadata/MetadataReader.cs
	  Mono.Cecil.Metadata/MetadataInitializer.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Metadata/MetadataStream.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/CodeWriter.cs:
		Add helpers visitor.
		On going work on the writing layer.

	* CodeGen/templates/Utilities.cs
	  CodeGen/templates/MetadataRowReader.cs
	  CodeGen/templates/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/StringsHeap.cs
	  Mono.Cecil.Metadata/MetadataRowReader.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/MetadataReader.cs
	  Mono.Cecil.Metadata/Utilities.cs
	  Mono.Cecil.Metadata/BlobHeap.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Metadata/MetadataHeap.cd
	  Mono.Cecil.Metadata/GuidHeap.cs:
		On going work on the writing layer.

	* CodeGen/templates/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/MetadataWriter.cs:
		On going work on the writing layer.
	* Mono.Cecil.Implem/StructureWriter.cs:
		Correctly override methods
	* CodeGen/templates/MetadataRowWriter.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs:
		Fix build warnings.

	* Mono.Cecil/IResource.cs
	  Mono.Cecil.Implem/AssemblyLinkedResource.cs
	  Mono.Cecil.Implem/EmbeddedResource.cs
	  Mono.Cecil.Implem/LinkedResource.cs
	  Mono.Cecil.Implem/Resource.cs:
		Rename field Attributes to Flags for the sake of consistency.
	* Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs
	  Mono.Cecil.Implem/StructureWriter.cs:
		On going work on the writing layer.
	* Mono.Cecil.Implem/StructureReader.cs:
		Style.

	* Mono.Cecil/IAssemblyName.cs
	  Mono.Cecil.Implem/AssemblyName.cs
	  Mono.Cecil.Implem/StructureReader.cs:
		Add an AssemblyFlag property to an IAssemblyNameReference,
		implement it, and read it.

2005-08-04  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Implem/ReflectionReader.cs:
		set a correct name to nameless parameters

	* Mono.Cecil.Signatures/SignatureReader.cs:
		don't crash on null custom attributes

2005-08-03  Jb Evain  <jbevain@gmail.com>

	* CodeGen/templates/OpCodes.cs
	  Mono.Cecil.Cil/OpCodes.cs
	  Mono.Cecil.Cil/OpCode.cs:
		Revert modifications to reduce code. OpCodes::.ctors were
		not called.

	* Mono.Cecil.Implem/ReflectionReader.cs:
		Make sure parameters are read even if there is no
		corresponding Param row. Thanks Cesar for the hint.

	* Mono.Cecil.Metadata/MetadataWriter.cs
	  Mono.Cecil.Metadata/UserStringsHeap.cs
	  Mono.Cecil.Metadata/GuidHeap.cs
	  Mono.Cecil.Implem/CodeReader.cs:
		On going work on the writing layer

	* CodeGen/cecil-gen.rb
	  CodeGen/cecil-gen-sources.rb
		make executable
	* *.*: set svn:eol-style to native

	* Mono.Cecil/BaseStructureVisitor.cs
	  Mono.Cecil/BaseReflectionVisitor.cs
	  Mono.Cecil.Implem/BaseReflectionReader.cs:
		Add empty visitors for the sake of simplicity
	* Mono.Cecil.Implem/StructureReader.cs
	  Mono.Cecil.Implem/ReflectionReader.cs:
		Inherit new visitors

2005-08-03  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Implem/ReflectionReader.cs
	  Mono.Cecil.Implem/AggressiveReflectionReader.cs
	  Mono.Cecil.Implem/LazyReflectionReader.cs
	  Mono.Cecil.Implem/CodeReader.cs:
		Modify and add helpers to avoid lots of casts.
		Correct a bug in custom attributes attribution.

2005-08-02  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Signatures/TypeSpec.cs:
		Don't restrain the SigType
	* Mono.Cecil.Implem/AggressiveReflectionReader.cs:
		Set PInvokeInfos on the correct method

2005-07-30  Jb Evain  <jbevain@gmail.com>

	* CodeGen/cecil-gen.rb
	  CodeGen/cecil-gen-sources.rb:
		make them executable
	* CodeGen/cecil-gen-types: style
	* CodeGen/templates/ImageWriter.cs
	  Mono.Cecil.Binary/ImageWriter.cs:
		Prelimimary work on assembly writing

2005-07-29  Jb Evain  <jbevain@gmail.com>

	* CodeGen/cecil-gen-types.rb
	  CodeGen/templates/MetadataTableWriter.cs
	  CodeGen/templates/MetadataRowWriter.cs
	  Mono.Cecil/AssemblyFactory.cs
	  Mono.Cecil.Metadata/MetadataTableWriter.cs
	  Mono.Cecil.Metadata/MetadataRowWriter.cs
	  Mono.Cecil.Implem/StructureWriter.cs
	  Mono.Cecil.Implem/ReflectionWriter.cs:
		Preliminary work on assembly writing

2005-07-28  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil/AssemblyFactory.cs
	  Mono.Cecil.Implem/StructureWriter.cs
		Preliminary work on assembly writing

	* Mono.Cecil/IMetadataTokenProvider.cs
	  Mono.Cecil/IMember.cs
	  Mono.Cecil/IParameter.cs:
		Add a MetadataToken property on searchable items
	* Mono.Cecil.Metadata/MetadataToken.cs:
		Add a factory method to create token from row number
	* Mono.Cecil.Implem/TypeReference.cs
	  Mono.Cecil.Implem/MemberReference.cs
	  Mono.Cecil.Implem/ParameterDefinition.cs:
		Implement the token property
	* Mono.Cecil.Implem/ReflectionReader.cs
	  Mono.Cecil.Implem/AggressiveReflectionReader.cs
	  Mono.Cecil.Implem/LazyReflectionReader.cs:
		Set the token property on reading
	* Mono.Cecil/IModuleDefinition.cs
	  Mono.Cecil.Implem/ModuleDefinition.cs
	  Mono.Cecil.Implem/ReflectionReader.cs:
		Add methods to lookup items from their tokens 

2005-07-27  Jb Evain  <jbevain@gmail.com>

	* CodeGen/templates/OpCodes.cs
	  Mono.Cecil.Cil/OpCodes.cs
	  Mono.Cecil.Cil/OpCode.cs:
		Changes to reduce the size of the cache ctor

2005-07-22  Raja R Harinath  <rharinath@novell.com>

	* Makefile (MCS): Allow compiler to be overriden.

2005-07-21  Todd Berman  <tberman@off.net>

	* configure: Add a small stub configure (stolen from mcs) to set the
	prefix.
	* mono-cecil.pc.in: Add a mono-cecil.pc.in to allow for installation
	according to the new "Libraries with Unstable API" Wiki documentation.
	* Makefile: Add an install an a mono-cecil.pc target to allow for
	installation and creation of the pc file.

2005-07-14  Jb Evain  <jbevain@gmail.com>

	* CodeGen/templates/ImageReader.cs
	  Mono.Cecil.Binary/IBinaryVisitor.cs
	  Mono.Cecil.Binary/Image.cs
	  Mono.Cecil.Binary/ImageInitializer.cs
	  Mono.Cecil.Binary/Imports.cs
	  Mono.Cecil.Binary/ImageReader.cs:
		Read Imports Tables

2005-07-14  Jb Evain  <jbevain@gmail.com>

	* CodeGen/cecil-gen.rb:
		make codegen works on ruby 1.8.2
	* CodeGen/templates/*.cs
	  Mono.Cecil.Metadata/*.cs:
	  	style

2005-07-13  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Implem/VariableDefinition.cs:
		set the index field

2005-07-13  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.dll.sources: regenerated
	* Mono.Cecil.Signatures/SignatureReader.cs:
		Fix compilation warnings
	* Mono.Cecil/IArrayType.cs
	  Mono.Cecil.Implem/ArrayType.cs:
	  	Add Rank helper property
	* Mono.Cecil/ITypeDefinition.cs
	  Mono.Cecil.Implem/TypeDefinition.cs:
	  	Add Constructors helper property

2005-07-11  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil/IMethod.cs
	  Mono.Cecil.Implem/Instruction.cs
	  Mono.Cecil.Implem/ExceptionHandler.cs
	  Mono.Cecil.Implem/MethodDefinition.cs
	  Mono.Cecil.Implem/Label.cs
	  Mono.Cecil.Implem/CodeReader.cs
	  Mono.Cecil.Implem/MethodBody.cs
	  Mono.Cecil.Implem/CilEmitter.cs
	  Mono.Cecil.Cil/ILabel.cs
	  Mono.Cecil.Cil/IInstruction.cs
	  Mono.Cecil.Cil/IExceptionHandler.cs
	  Mono.Cecil.Cil/IMethodBody.cs
	  Mono.Cecil.Cil/ICilEmitter.cs:
		Preliminary changes on the instruction model before
		changing of latptop

2005-07-08  Jb Evain  <jbevain@gmail.com>

   * Every generated files: use \n instead of \r\n

2005-07-07  Jb Evain  <jbevain@gmail.com>

	* *.*: use Mono coding conventions
	* Mono.Xml/*.*: update Mono.Xml from corlib
	* Mono.Cecil.Metadata/CultureUtils.cs:
		Ensure that Cecil works under Mono

2005-07-02  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil/IMethod.cs
	  Mono.Cecil/IProperty.cs
	  Mono.Cecil/IEvent.cs
	  Mono.Cecil/IField.cs
	  Mono.Cecil/ITypeDefinition.cs
	  Mono.Cecil.Implem/MethodDefinition.cs
	  Mono.Cecil.Implem/PropertyDefinition.cs
	  Mono.Cecil.Implem/EventDefinition.cs
	  Mono.Cecil.Implem/FieldDefinition.cs
	  Mono.Cecil.Implem/TypeDefinition.cs:
		Add some funky sugar attributes,
		more to come

2005-07-01  Jb Evain  <jbevain@gmail.com>

	* CodeGen/cecil-gen.rb,
	  CodeGen/templates/MetadataTableWriter.cs,
	  CodeGen/templates/MetadataRowWriter.cs,
	  Mono.Cecil.Metadata/MetadataTableWriter.cs,
	  Mono.Cecil.Metadata/MetadataRowWriter.cs,
	  Mono.Cecil.Metadata/MetadataWriter.cs:
		Add metadata writing visitors
	* Mono.Cecil.Metadata/CultureUtils.cs:
		Be sure to use every possible culture infos.
	* Mono.Cecil.Cil/IVariable.cs,
	  Mono.Cecil.Implem/VariableDefinition.cs,
	  Mono.Cecil.Implem/CodeReader.cs,
	  Mono.Cecil.Implem/CilEmitter.cs:
		Add an index property to local variables
	* Mono.Cecil.Metadata/MetadataReader.cs,
	  Mono.Cecil.Metadata/MetadataRowReader.cs,
	  CodeGen/templates/MetadataRowReader.cs,
	  Mono.Cecil.Metadata/TablesHeap.cs:
		Handles null heaps
	* Mono.Cecil.Implem/StructureWriter.cs,
	  Mono.Cecil.Implem/ReflectionController.cs,
	  Mono.Cecil.Implem/ReflectionWriter.cs:
		Assemble writing classes

2005-06-28  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Implem/ReflectionReader.cs: style
	* Mono.Cecil.Implem/LazyReflectionReader.cs:
		read the last property as well.

2005-06-21  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Implem/ReflectionReader.cs: Correct a bug that prevents
		assemblies to be readed if they have an entrypoint. Suggestion by
		Mario Sopena
	* Mono.Cecil.Implem/CodeReader.cs: Use sbyte not to lose negatives
		offsets. Suggestion by Vladislav Spivak
	* CodeGen/cecil.xml,
	  Mono.Cecil.Cil/OpCodes.cs,
	  Mono.Cecil.Cil/StackBehaviour.cs: Add an PopAll enumeration value
		for StackBehaviour, and set the StackBehaviourPop property for
		leave and leave.s opcodes to it. Suggested by Vladislav Spivak

2005-06-12  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.Implem/TypeDefinition.cs: Set the declaring type
		to this when defining a nested type.

2005-06-07  Jb Evain  <jbevain@gmail.com>

	* Mono.Cecil.dll.sources,
	* CodeGen/cecil.xml,
	* Mono.Cecil/IReflectionVisitor.cs,
	* Mono.Cecil/INestedTypeCollection.cs,
	* Mono.Cecil/ITypeDefinition,
	* Mono.Cecil.Implem/ReflectionReader.cs,
	* Mono.Cecil.Implem/ReflectionWriter.cs,
	* Mono.Cecil.Implem/TypeDefinition.cs,
	* Mono.Cecil.Implem/NestedTypeCollection:
		Add a collection of nested types for type definition

	* Mono.Cecil.Implem/ModuleDefinition.cs: simplify type creation

2005-06-07  Jb Evain  <jbevain@gmail.com>

	* ChangeLog: Cecil has now ChangeLogs. Let use them.
